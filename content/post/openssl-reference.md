---
categories:
  - "security"
  - "encryption"
keywords:
  - "openssl"
tags:
  - "openssl"
  - "encryption"
  - "crypto"
  - "tls"
  - "reference"
date: "2016-12-05"
title: "OpenSSL - Reference"
thumbnailImagePosition: "left"
thumbnailImage: "/images/thumb/thumb-openssl.png"

draft: true
---

[OpenSSL](https://www.openssl.org/) is quite and extensive project. The docs for the `cli` ([openssl commands](https://www.openssl.org/docs/man1.1.0/apps/)) gives you an overview on just how many things you can do with openssl. I will use this post as a reference for frequent things I do with openssl and update it when needed.
<!--more-->

<!-- toc -->

# Generating Key Material
Commands related to the generation of private key material for asymmetric encryption. Remember to always protect your private keys!

## Elliptic Curve (EC)
The only Elliptic Curve algorithms that [OpenSSL currently supports](https://wiki.openssl.org/index.php/Command_Line_Elliptic_Curve_Operations) are Elliptic Curve Diffie Hellman (ECDH) for key agreement and Elliptic Curve Digital Signature Algorithm (ECDSA) for signing/verifying. Reasons to use EC over RSA include:
* Shorter keys needed for equivalent protection compared to RSA.
* Lower CPU/Memory requirements.
* better Performance.

References: [ecparam](https://www.openssl.org/docs/man1.1.0/apps/ecparam.html) | [ec](https://www.openssl.org/docs/man1.1.0/apps/ec.html)
```
# list available EC curves
openssl ecparam -list_curves

# create EC parameters (using a curve from above list) and a private key but discard parameters
openssl ecparam -name secp384r1 -genkey -noout -out /tmp/ec-secp384r1-key.pem

# create EC parameters (using a curve from above list) and a private key
openssl ecparam -name secp384r1 -genkey -out /tmp/ec-secp384r1-key.pem

# view EC parameters
openssl ecparam -in /tmp/secp384r1-key.pem -noout -text

# encrypt the private key with a symmetric key algorithm
# options are: -aes128|-aes192|-aes256|-camellia128|-camellia192|-camellia256|-des|-des3|-idea
openssl ec -in /tmp/ec-secp384r1-key.pem -aes256 -out /tmp/ec-secp384r1-aes256-key.pem

# remove encryption of a private key
openssl ec -in /tmp/ec-secp384r1-aes256-key.pem -out /tmp/ec-secp384r1-key.pem

# extract public key from private key
openssl ec -in /tmp/ec-secp384r1-key.pem -pubout -out /tmp/ec-secp384r1-pub.pem
```

## Rivest-Shamir-Adleman (RSA)
RSA is the most common type of Public/Private Key. For the reason, it is the most compatible.

References: [genrsa](https://www.openssl.org/docs/man1.1.0/apps/genrsa.html) | [rsa](https://www.openssl.org/docs/man1.1.0/apps/rsa.html)
```
# generate rsa private key of length 4096 bits
openssl genrsa -out /tmp/rsa-4096-key.pem 4096

# encrypt the private key with a symmetric key algorithm
# options are: -aes128|-aes192|-aes256|-camellia128|-camellia192|-camellia256|-des|-des3|-idea
openssl rsa -in /tmp/rsa-4096-key.pem -aes256 -out /tmp/rsa-4096-aes256-key.pem 4096

# remove encryption of a private key
openssl rsa -in /tmp/rsa-4096-aes256-key.pem -out /tmp/rsa-4096-key.pem

# extract public key from private key
openssl rsa -in /tmp/rsa-4096-key.pem -pubout -out /tmp/rsa-4096-pub.pem
```

# x509 Certificates
An X.509 certificate is a digital certificate used in PKI for authentication. x.509 is the format (standard) used for TLS. The certificate includes the public key along with additional data to help provide authentication.

## Creating and Viewing x509 Certificates
Commands related to the generation and viewing of x509 certificates.

References: [x509](https://www.openssl.org/docs/man1.1.0/apps/x509.html)
```
# create a x509 certificate signed by a private key generated above
openssl req -new -x509 -key /tmp/ec-secp384r1-key.pem -out /tmp/ec-secp384r1-x509.pem -days 365

# view this certificate in human readable format
openssl x509 -in /tmp/ec-secp384r1-x509.pem -text -noout

# view the public key of a x509 certificate in pem format
openssl x509 -in /tmp/ec-secp384r1-x509.pem -noout -pubkey
```

## Verification of x509 Certificates
We can verify that an x509 certificate was generated by a specific private key by comparing the public keys
